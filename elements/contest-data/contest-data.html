<link rel="import" href="../../vendor/polymer/polymer.html">
<link rel="import" href="../../vendor/firebase-element/firebase-collection.html">

<dom-module id="contest-data">
	<template>
		<style>
		:host {
			display: block;
		}
		</style>
		<firebase-collection data="{{data}}"
							 location="{{userLocation}}"
							 on-firebase-value="_firebaseLoaded">
		</firebase-collection>
	</template>
	<script>
		Polymer({
			is: 'contest-data',
			properties: {
				location: {
					type: String
				},
				userLocation: {
					type: String
				},
				fireUser: {
					observer: '_userChanged'
				},
				ref: {
					observer: '_refChanged'
				},
				data: {
					notify: true
				}
			},
			_userChanged: function (user) {
				this.userLocation = this.location;
				if (user) {
					this.userLocation = [this.location, 'users', this.fireUser.uid].join('/');
				}
			},
			_refChanged: function (ref) {
				// console.log(ref);
			},
			_firebaseLoaded: function (e) {
				// console.log(this.data);
				// this.users = this.fbUsers;
				// this.linkPaths('fbUsers', 'users');
				// this.push(data, {name:"plop"});
			}
		});
	</script>
</dom-module>
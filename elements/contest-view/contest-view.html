<link rel="import" href="../../vendor/polymer/polymer.html">
<link rel="import" href="../../vendor/paper-toast/paper-toast.html">
<link rel="import" href="../fb-login/fb-login.html">

<dom-module id="contest-view">
	<template>
		<style>
			:host {
				display: block;
				height: 100%;
			}
		    .container {
		        width: 80%;
		        margin: 50px auto;
		    }
		</style>
		<paper-header-panel class="flex">
		    <paper-toolbar>
		    </paper-toolbar>
			<paper-toast id="message"
				text="You must be loged in to use this app"
				duration="5000"></paper-toast>
			<iron-pages selected="0">
				<div id="index">
					<div class="container">
						<fb-login
							auto-login="{{apiLoaded}}"
							graph-url="me?fields=name"
							response="{{resp}}"
							on-fb-login-canceled="loginCancel"></fb-login>
						<div>{{resp.name}}</div>
					</div>
				</div>
				<div></div>
				<div></div>
			</iron-pages>
		</paper-header-panel>
	</template>
	<script>
		Polymer({
			is: 'contest-view',
			properties: {
				apiLoaded: {
					type: String,
					notify: true
				}
			},
			loginCancel: function () {
				document.querySelector('#message').open();
			}
		});
	</script>
</dom-module>
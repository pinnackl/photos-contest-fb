<link rel="import" href="../../vendor/polymer/polymer.html">
<link rel="import" href="../../vendor/paper-toast/paper-toast.html">
<link rel="import" href="../fb-login/fb-login.html">
<link rel="import" href="../contest-data/contest-data.html">

<dom-module id="contest-view">
	<template>
		<style>
			:host {
				display: block;
				height: 100%;
			}
		    .container {
		        width: 80%;
		        margin: 50px auto;
		    }
		</style>
		<paper-header-panel class="flex">
		    <paper-toolbar>
		    </paper-toolbar>
			<paper-toast id="message"
				text="You must be loged in to use this app"
				duration="5000"></paper-toast>
			<iron-pages selected="0">
				<div id="index">
					<div class="container">
						<fb-login
							id="loginbtn1"
							graph-url="me?fields=name"
							response="{{resp}}"
							on-fb-login-canceled="loginCancel"></fb-login>
						<div>{{resp.name}}</div>
    					<contest-data></contest-data>
					</div>
				</div>
				<div></div>
				<div></div>
			</iron-pages>
		</paper-header-panel>
	</template>
	<script>
		Polymer({
			is: 'contest-view',
			properties: {
				apiLoaded: {
					type: String,
					value: 'false',
					notify: true,
					observer: '_apiLoaded'
				},
				autoLogin: {
					type: Boolean,
					value: false
				}
			},
			// Property "apiLoaded" observer
			_apiLoaded: function (n, o) {
				if (n === 'true' && this.autoLogin) {
					this.$.loginbtn1.autoLogin = true;
				}
			},
			loginCancel: function () {
				this.$.message.open();
			}
		});
	</script>
</dom-module>
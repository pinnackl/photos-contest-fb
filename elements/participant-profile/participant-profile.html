<dom-module id="participant-profile">
  <style type="text/css">
    .profile-picture{
      border-radius: 100%
    }

    .participant{
      display: inline-block;
      margin-right: 50px;
    }

    section.contest-view{
      display: block;
    }
  </style>
    <template>
      <iron-localstorage id="ls" name="[[storageLabel]]" value="{{storage}}" auto-save-disabled></iron-localstorage>
      <firebase-collection
            location="{{participantLocation}}"
            data="{{participants}}"
            on-firebase-value="_firebaseLoaded"></firebase-collection>
      <template is="dom-repeat" items="[[participants]]" as="participant">
        <div class="participant">
          <img class="profile-picture" src="[[participant.photoUrl]]" alt="Avatar" data-route="[[participant.id]]" on-tap="_openProfile">
          <p class="fullName">[[participant.name]]</p>
        </div>
      </template>
    </template>
    <script type="text/javascript">
  Polymer({
    is: "participant-profile",

    behaviors: [
     Polymer.NeonAnimationRunnerBehavior,
     Polymer.NeonSharedElementAnimatableBehavior
    ],

    properties: {
      // START ANIMATIONS
      animationConfig: {
        value: function(){
          return {
            'entry': [{
              name: 'fade-in-animation',
              node: this
            },{
              name: 'transform-animation',
              transformFrom: 'translateX(-100vh)',
              node: this
            }],
            'exit': [{
              name: 'hero-animation',
              id: 'hero',
              fromPage: this
            },{
              name: 'fade-out-animation',
              node: this
            }],
          }
        }
      },
      // END ANIMATIONS
      participants: {},
      storageLabel: String,
      storage: {
        observer: "_storageChanged"
      }
    },
      _openProfile: function(event){
        if(event.target.classList.contains('participant-profile')){
          this.fire("updateShowcase",event.model.__data__["participant.id"]);
          this.sharedElements = {
            'hero': event.target
          }

          this.fire("changePage","participantShowcase");
        }  
      },
      _firebaseLoaded: function(){
        
      },
      _storageChanged: function(storage){
        if (storage) {
          this.participantLocation = [storage.firebase, 'participants'].join('/');
        }
      }
    // ready: function(){
    //   this.productsList = [{
    //     "id": 0,
    //     "name": "Card 1 - Cat 1",
    //     "header": "http://lorempixel.com/350/200",
    //     "launcher": "../../images/ic_launcher.png"
    //   },{
    //     "id": 1,
    //     "name": "Card 2 - Cat 1",
    //     "header": "http://lorempixel.com/350/200",
    //     "launcher": "../../images/ic_launcher.png"
    //   }];
    // },

    // _repeatRender: function(){
    //   this.paperCard = Polymer.dom(this.root).querySelectorAll("paper-card");
    //   this.animationConfig["entry"].push({
    //     name: "cascaded-animation",
    //     animation: "transform-animation",
    //     transformFrom: "translateY(100vh)",
    //     nodes: this.paperCard
    //   })
    // },

    // _openCard: function(event){
    //   if(event.target.classList.contains('paper-fab')) {
    //     this.fire("updateShowcase",this.productsList[event.model.__data__["item.id"]]);

    //     this.sharedElements = {
    //       'hero': event.target
    //     }

    //     this.fire("changePage","showcase");
    //   }
    // }

  })
</script>
    <!-- </neon-animated-pages> -->
</dom-module>

